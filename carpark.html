<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <!--AXIOS link-->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <!--JQuery Script-->
  <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
  <!--Own Scripts-->
  <link rel="stylesheet" href="style/style.css" type="text/css" />
  <style>
  </style>
  <title>Carpark availablity</title>
</head>

<body>
  <!--<main class="container-fluid">-->
  <div class="main-frame bg-dark ">
    <div class="result-frame row">
      <div class="map-frame">
        <div id="map"></div>
      </div>
      <div class="zoom-frame">
        <div id="map2"></div>
      </div>
    </div>
    <div class="entry-frame">
      <div id="entry-box" class="entry-box">
        <p id="carpark-info">https://api.data.gov.sg/v1/transport/taxi-availability</p>
        <ul>
          <li>Direction Service</li>
          <li>Markers</li>
        </ul>
        <input id="carpark" type="button" class="badge-primary" value="Find Carpark">
      </div>
    </div>
  </div>
  <!--</main>-->

  <script>
    /* global $ google navigator axios*/
 var map, map2, infoWindow;

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 1.3521, lng: 103.8198 },
        zoom: 10
      });
      map2 = new google.maps.Map(document.getElementById('map2'), {
        center: { lat: 1.3521, lng: 103.8198 },
        zoom: 18
      });

      infoWindow = new google.maps.InfoWindow;
      if (navigator.geolocation) {
        //get the location of the user current position
        navigator.geolocation.getCurrentPosition(function(position) { // get user position
          var pos = {
            lat: position.coords.latitude,
            lng: position.coords.longitude,
          };

          infoWindow.setPosition(pos); // set the window to the location of user
          markerPlacement(pos, map) //set the marker to the location of the user, pos contains the lat and lng
          markerPlacement(pos, map2) //set the marker to the location of the user, pos contains the lat and lng

          // infoWindow.setContent('You are here'); //Message to User at the location set
          // infoWindow.open(map);    //Display the text in line 63
          // infoWindow.open(map2); 

          map.setCenter(pos); //Set the map to center to the position set in pos
          map2.setCenter(pos);

        }, function() {
          handleLocationError(true, infoWindow, map.getCenter());
        });

      }
      else {
        // Browser doesn't support Geolocation
        handleLocationError(false, infoWindow, map.getCenter());
      }
    }
    //function to place marker of coordinates given
    function markerPlacement(myLatLng, map) { //myLatLng to set location, map to set map to place marker
      var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        title: 'Hello World!'
      })
    }
    //function to set window center to user location
    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
      infoWindow.setPosition(pos);
      infoWindow.setContent(browserHasGeolocation ?
        'Error: The Geolocation service failed.' :
        'Error: Your browser doesn\'t support geolocation.');
      infoWindow.open(map);
    }
    // Axios function to get data from the api
  </script>


  <!--Google Map link-->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA1nzF_4Fq-BZd-nGgxYlpdbzeAiBtkkkw&callback=initMap&libraries=places" async defer></script>
  <script type="text/javascript" src="scripts/script.js"></script>
  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>

</html>
